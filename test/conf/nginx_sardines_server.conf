upstream myApp1 {
    server srv1.example.com weight=3;
    server srv2.example.com;
    server srv3.example.com;
}

upstream myApp2 {
    least_conn;
    server srv1.example.com;
    server srv2.example.com;
    server srv3.example.com;
}

upstream myapp_HTTPS {
    ip_hash;
    server srv1.example.com;
    server srv2.example.com;
    server srv3.example.com;
}

# Correct access point
server {
    listen 80;
    server_name www.example.com;

    location /myapp1_root {
        proxy_pass http://myapp1;
    }
}

# Correct access point
server {
    listen 172.20.20.200:443 ssl;
    server_name inner.https.example.com;
    ssl_certificate inner.https.example.com.crt;
    ssl_certificate_key inner.https.example.com.key;

    location /myapp3_root {
        proxy_pass https://myapp_https;
    }
}

# Correct access point
server {
    listen 80;
    listen 443 ssl;
    server_name https.example.com;
    ssl_certificate https.example.com.crt;
    ssl_certificate_key https.example.com.key;

    location / {
        proxy_pass https://myapp_https;
    }

    location /myapp2_root {
        proxy_pass http://myapp2;
    }

    location /myapp2_root/myapp1_root {
        proxy_pass http://myapp1;
    }
}

# Incorrect access point
server {
    listen 80;
    server_name www.example.com;

    location /myapp1_root {
        proxy_pass http://myapp1;
    }
}

# Incorrect access point
server {
    listen 80;
    server_name www.example.com;

    location / {
        proxy_pass http://myapp1;
    }
}

# Incorrect access point
server {
    listen 80 ssl;
    listen 443;
    server_name localhost;
    ssl_certificate example.com.crt;
    ssl_certificate_key example.com.key;

    location / {
        proxy_pass http://myapp_https;
    }

    location /myapp2_root {
        proxy_pass https://myapp2;
    }

    location / {
        proxy_pass https://myapp1;
    }
}